<?xml version="1.0" encoding="UTF-8"?>
<!--

SESSION1 : SEND USAGE
Pattern: "event" attribute with an optional "namelist"

<datamodel>
  <data id="email" expr="'mailto:recipient@example.com'"/>
  <data id="content" expr="'http://www.example.com/mycontent.txt'"/>
  <data id="xmlcontent">
    <headers xmlns="http://www.example.com/headers">
      <cc>archive@example.com</cc>
      <subject>Example email</subject>
    </headers>
  </data>
</datamodel>

  ...

<send sendid="send-123"
      target="'http://scxml-processors.example.com/session2'"
      type="'http://www.w3.org/TR/scxml/#SCXMLEventProcessor'" event="'email.send'"
      namelist="email content xmlcontent"
      hints="'' '' 'Email headers'"/>

-->
<!-- MESSAGE -->
<scxml:message xmlns:scxml="http://www.w3.org/2005/07/scxml" version="1.0"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.w3.org/2005/07/scxml scxml-message.xsd"
       source="http://scxml-processors.example.com/session1" sourcetype="scxml"
       target="http://scxml-processors.example.com/session2" type="scxml"
       sendid="send-123" name="email.send">
  <scxml:payload>
    <scxml:property name="email">mailto:recipient@example.com</scxml:property>
    <scxml:property name="content">http://www.example.com/mycontent.txt</scxml:property>
    <scxml:property name="xmlcontent">
      <scxml:hint>Email headers</scxml:hint>
      <headers xmlns="http://www.example.com/headers">
        <cc>archive@example.com</cc>
        <subject>Example email</subject>
      </headers>
    </scxml:property>
  </scxml:payload>
</scxml:message>
<!--

SESSION2 : SEND PROCESSING
Pattern: "event" attribute with an optional "namelist"

<scxml:transition event="email.send">
  <my:email to="data('_event')/scxml:property[@name='email']"
            cc="data('_event')/scxml:property[@name='xmlcontent']/h:headers/h:cc"
            subject="data('_event')/scxml:property[@name='xmlcontent']/h:headers/h:subject"
            content="data('_event')/scxml:property[@name='content']"/>
</scxml:transition>

-->
